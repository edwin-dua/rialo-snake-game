<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #f5f5dc;
            background-image: url('1500x500.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(245, 245, 220, 0.7);
            pointer-events: none;
            z-index: -1;
        }

        .game-container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            max-width: 1200px;
            width: 100%;
            padding: 20px;
        }

        .game-area {
            flex: 1;
            max-width: 600px;
        }

        .game-board {
            width: 100%;
            max-width: 400px;
            height: 400px;
            background: #f5f5dc;
            border: 3px solid #333;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            background-image: 
                linear-gradient(to right, rgba(0,0,0,0.1) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(0,0,0,0.1) 1px, transparent 1px),
                radial-gradient(circle at 30% 20%, rgba(0,0,0,0.03) 0%, transparent 40%),
                radial-gradient(circle at 70% 80%, rgba(0,0,0,0.02) 0%, transparent 35%);
            background-size: 20px 20px, 20px 20px, 100px 100px, 80px 80px;
            margin: 0 auto;
        }

        .snake-segment {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #2c3e50;
            border-radius: 3px;
            border: 1px solid #34495e;
        }

        .touch-controls {
            display: none;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            gap: 10px;
            max-width: 200px;
            margin: 20px auto;
        }

        .touch-button {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .touch-button:active {
            background: #2980b9;
        }

        .touch-button.up {
            grid-column: 2;
            grid-row: 1;
        }

        .touch-button.down {
            grid-column: 2;
            grid-row: 3;
        }

        .touch-button.left {
            grid-column: 1;
            grid-row: 2;
        }

        .touch-button.right {
            grid-column: 3;
            grid-row: 2;
        }

        .snake-head {
            background: #34495e;
            border-radius: 5px;
            border: 2px solid #2c3e50;
        }

        .food {
            position: absolute;
            width: 24px;
            height: 24px;
            background-image: url('qbjSWMDP_400x400.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border-radius: 4px;
            transform: rotate(-15deg);
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .sidebar {
            width: 250px;
            background: #333;
            border-radius: 10px;
            padding: 20px;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .score-display {
            text-align: center;
            margin-bottom: 30px;
        }

        .score-title {
            font-size: 18px;
            margin-bottom: 10px;
            color: #ecf0f1;
        }

        .score-value {
            font-size: 36px;
            font-weight: bold;
            color: #f5f5dc;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #555;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .controls {
            margin: 20px 0;
        }

        .controls h3 {
            margin-bottom: 15px;
            color: #ecf0f1;
        }

        .control-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            font-size: 14px;
        }

        .control-key {
            background: #555;
            padding: 5px 10px;
            border-radius: 5px;
            margin-right: 10px;
            font-family: monospace;
            min-width: 40px;
            text-align: center;
        }

        .game-status {
            text-align: center;
            margin: 20px 0;
        }

        .game-over {
            color: #e74c3c;
            font-size: 18px;
            font-weight: bold;
        }

        .start-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            transition: background 0.3s;
        }

        .start-button:hover {
            background: #2980b9;
        }

        .instructions {
            background: #444;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 14px;
            line-height: 1.5;
        }

        .instructions h4 {
            color: #f5f5dc;
            margin-bottom: 10px;
        }

        .instructions p {
            margin: 5px 0;
        }

        .footer {
            position: fixed;
            bottom: 0;
            right: 0;
            padding: 10px 20px;
            background: rgba(51, 51, 51, 0.9);
            color: white;
            font-size: 14px;
            border-radius: 10px 0 0 0;
            z-index: 1000;
        }

        .footer a {
            color: #3498db;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer a:hover {
            color: #2980b9;
        }

        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
                align-items: center;
                padding: 10px;
            }
            
            .game-board {
                max-width: 350px;
                height: 350px;
            }
            
            .sidebar {
                width: 100%;
                max-width: 400px;
                margin-top: 20px;
            }

            .touch-controls {
                display: grid;
            }

            .footer {
                position: relative;
                text-align: center;
                border-radius: 0;
                margin-top: 20px;
            }

            .snake-segment {
                width: 17.5px;
                height: 17.5px;
            }

            .food {
                width: 21px;
                height: 21px;
            }
        }

        @media (max-width: 480px) {
            .game-board {
                max-width: 300px;
                height: 300px;
            }

            .snake-segment {
                width: 15px;
                height: 15px;
            }

            .food {
                width: 18px;
                height: 18px;
            }

            .touch-button {
                min-height: 45px;
                font-size: 20px;
            }

            .sidebar {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-area">
            <div class="game-board" id="gameBoard">
                <div class="game-status" id="gameStatus">
                    <button class="start-button" onclick="startGame()">Start Game</button>
                </div>
            </div>
            <div class="touch-controls">
                <button class="touch-button up" data-direction="up">↑</button>
                <button class="touch-button left" data-direction="left">←</button>
                <button class="touch-button right" data-direction="right">→</button>
                <button class="touch-button down" data-direction="down">↓</button>
            </div>
        </div>
        
        <div class="sidebar">
            <div class="score-display">
                <div class="score-title">Score</div>
                <div class="score-value" id="score">0</div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div class="instructions">
                <h4>How to Play</h4>
                <p>• Use arrow keys, WASD, or touch controls to move</p>
                <p>• Eat the food to grow and score points</p>
                <p>• Avoid hitting yourself or the walls</p>
                <p>• Touch controls appear on mobile devices</p>
            </div>
            
            <div class="controls">
                <h3>Controls</h3>
                <div class="control-item">
                    <span class="control-key">↑</span>
                    <span>Move Up</span>
                </div>
                <div class="control-item">
                    <span class="control-key">↓</span>
                    <span>Move Down</span>
                </div>
                <div class="control-item">
                    <span class="control-key">←</span>
                    <span>Move Left</span>
                </div>
                <div class="control-item">
                    <span class="control-key">→</span>
                    <span>Move Right</span>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        Built by <a href="https://x.com/EdstechD" target="_blank">Edwin</a>
    </div>

    <script>
        class SnakeGame {
            constructor() {
                this.board = document.getElementById('gameBoard');
                this.scoreElement = document.getElementById('score');
                this.progressElement = document.getElementById('progressFill');
                this.gameStatusElement = document.getElementById('gameStatus');
                
                this.boardSize = 20;
                this.cellSize = this.calculateCellSize();
                this.gameRunning = false;
                this.score = 0;
                this.gameSpeed = 185;
                
                this.snake = [{x: 10, y: 10}];
                this.direction = {x: 1, y: 0};
                this.food = {x: 15, y: 15};
                
                this.setupEventListeners();
                this.generateFood();
                this.updateDisplay();
            }

            calculateCellSize() {
                const boardWidth = this.board.offsetWidth;
                return Math.floor(boardWidth / this.boardSize);
            }
            
            setupEventListeners() {
                // Keyboard controls
                document.addEventListener('keydown', (e) => {
                    if (!this.gameRunning) return;
                    this.handleDirection(e.key);
                });

                // Touch controls
                const touchButtons = document.querySelectorAll('.touch-button');
                touchButtons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        if (!this.gameRunning) return;
                        const direction = e.target.getAttribute('data-direction');
                        this.handleDirection(direction);
                    });
                });

                // Prevent scrolling on touch devices
                document.addEventListener('touchstart', (e) => {
                    if (e.target.closest('.game-board') || e.target.closest('.touch-controls')) {
                        e.preventDefault();
                    }
                }, { passive: false });

                document.addEventListener('touchmove', (e) => {
                    if (e.target.closest('.game-board') || e.target.closest('.touch-controls')) {
                        e.preventDefault();
                    }
                }, { passive: false });
            }

            handleDirection(key) {
                switch(key) {
                    case 'ArrowUp':
                    case 'w':
                    case 'W':
                    case 'up':
                        if (this.direction.y === 0) {
                            this.direction = {x: 0, y: -1};
                        }
                        break;
                    case 'ArrowDown':
                    case 's':
                    case 'S':
                    case 'down':
                        if (this.direction.y === 0) {
                            this.direction = {x: 0, y: 1};
                        }
                        break;
                    case 'ArrowLeft':
                    case 'a':
                    case 'A':
                    case 'left':
                        if (this.direction.x === 0) {
                            this.direction = {x: -1, y: 0};
                        }
                        break;
                    case 'ArrowRight':
                    case 'd':
                    case 'D':
                    case 'right':
                        if (this.direction.x === 0) {
                            this.direction = {x: 1, y: 0};
                        }
                        break;
                }
            }
            
            startGame() {
                this.gameRunning = true;
                this.snake = [{x: 10, y: 10}];
                this.direction = {x: 1, y: 0};
                this.score = 0;
                this.generateFood();
                this.updateDisplay();
                this.gameStatusElement.innerHTML = '';
                this.gameLoop();
            }
            
            gameLoop() {
                if (!this.gameRunning) return;
                
                this.moveSnake();
                this.checkCollisions();
                this.updateDisplay();
                
                setTimeout(() => this.gameLoop(), this.gameSpeed);
            }
            
            moveSnake() {
                const head = {...this.snake[0]};
                head.x += this.direction.x;
                head.y += this.direction.y;
                
                this.snake.unshift(head);
                
                if (head.x !== this.food.x || head.y !== this.food.y) {
                    this.snake.pop();
                } else {
                    this.score += 10;
                    this.generateFood();
                    this.increaseSpeed();
                }
            }
            
            checkCollisions() {
                const head = this.snake[0];
                
                // Check wall collision - allow snake to reach the actual visual edge
                // The visual grid allows positions 0 to boardSize-1, so we check for >= boardSize
                if (head.x < 0 || head.x >= this.boardSize || head.y < 0 || head.y >= this.boardSize) {
                    this.gameOver();
                    return;
                }
                
                // Check self collision
                for (let i = 1; i < this.snake.length; i++) {
                    if (head.x === this.snake[i].x && head.y === this.snake[i].y) {
                        this.gameOver();
                        return;
                    }
                }
            }
            
            generateFood() {
                do {
                    this.food = {
                        x: Math.floor(Math.random() * this.boardSize),
                        y: Math.floor(Math.random() * this.boardSize)
                    };
                } while (this.snake.some(segment => segment.x === this.food.x && segment.y === this.food.y));
            }
            
            increaseSpeed() {
                if (this.gameSpeed > 80) {
                    this.gameSpeed -= 2;
                }
            }
            
            updateDisplay() {
                // Recalculate cell size for responsive design
                this.cellSize = this.calculateCellSize();
                
                this.clearBoard();
                this.drawSnake();
                this.drawFood();
                this.scoreElement.textContent = this.score;
                
                // Update progress bar based on score
                const progress = Math.min((this.score / 1000) * 100, 100);
                this.progressElement.style.width = progress + '%';
            }
            
            clearBoard() {
                const elements = this.board.querySelectorAll('.snake-segment, .food');
                elements.forEach(el => el.remove());
            }
            
            drawSnake() {
                this.snake.forEach((segment, index) => {
                    const snakeElement = document.createElement('div');
                    snakeElement.className = index === 0 ? 'snake-segment snake-head' : 'snake-segment';
                    snakeElement.style.left = segment.x * this.cellSize + 'px';
                    snakeElement.style.top = segment.y * this.cellSize + 'px';
                    this.board.appendChild(snakeElement);
                });
            }
            
            drawFood() {
                const foodElement = document.createElement('div');
                foodElement.className = 'food';
                foodElement.style.left = this.food.x * this.cellSize + 'px';
                foodElement.style.top = this.food.y * this.cellSize + 'px';
                this.board.appendChild(foodElement);
            }
            
            gameOver() {
                this.gameRunning = false;
                this.gameStatusElement.innerHTML = `
                    <div class="game-over">Game Over!</div>
                    <div style="margin: 10px 0;">Final Score: ${this.score}</div>
                    <button class="start-button" onclick="startGame()">Play Again</button>
                `;
            }
        }
        
        let game;
        
        function startGame() {
            if (game) {
                game.startGame();
            } else {
                game = new SnakeGame();
                game.startGame();
            }
        }
        
        // Initialize game when page loads
        window.addEventListener('load', () => {
            game = new SnakeGame();
        });

        // Handle window resize and orientation changes
        window.addEventListener('resize', () => {
            if (game) {
                game.updateDisplay();
            }
        });

        // Handle orientation change on mobile
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                if (game) {
                    game.updateDisplay();
                }
            }, 100);
        });
    </script>
</body>
</html>
